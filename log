2012-08-30 00:56:03 22033    DEBUG [balancer.api.v1.loadbalancers] Creating loadbalancers controller with config:loadbalancers.py <balancer.common.config.BalancerConfigOpts object at 0x291f8d0>
2012-08-30 00:56:03 22033    DEBUG [balancer.api.v1.devices] Creating device controller with config: <balancer.common.config.BalancerConfigOpts object at 0x291f8d0>
2012-08-30 00:56:03 22033    DEBUG [routes.middleware] Initialized with method overriding = True, and path info altering = True
2012-08-30 00:56:03 22033    DEBUG [balancer-api] ********************************************************************************
2012-08-30 00:56:03 22033    DEBUG [balancer-api] Configuration options gathered from:
2012-08-30 00:56:03 22033    DEBUG [balancer-api] command line args: None
2012-08-30 00:56:03 22033    DEBUG [balancer-api] config files: ['./etc/balancer-api-paste.ini']
2012-08-30 00:56:03 22033    DEBUG [balancer-api] ================================================================================
2012-08-30 00:56:03 22033    DEBUG [balancer-api] config_file                    = ['./etc/balancer-api-paste.ini']
2012-08-30 00:56:03 22033    DEBUG [balancer-api] dbsync                         = False
2012-08-30 00:56:03 22033    DEBUG [balancer-api] debug                          = True
2012-08-30 00:56:03 22033    DEBUG [balancer-api] log_config                     = None
2012-08-30 00:56:03 22033    DEBUG [balancer-api] log_date_format                = %Y-%m-%d %H:%M:%S
2012-08-30 00:56:03 22033    DEBUG [balancer-api] log_dir                        = None
2012-08-30 00:56:03 22033    DEBUG [balancer-api] log_file                       = None
2012-08-30 00:56:03 22033    DEBUG [balancer-api] log_format                     = %(asctime)s %(process)d %(levelname)8s [%(name)s] %(message)s
2012-08-30 00:56:03 22033    DEBUG [balancer-api] syslog_log_facility            = LOG_USER
2012-08-30 00:56:03 22033    DEBUG [balancer-api] use_syslog                     = False
2012-08-30 00:56:03 22033    DEBUG [balancer-api] verbose                        = False
2012-08-30 00:56:03 22033    DEBUG [balancer-api] paste_deploy.config_file       = None
2012-08-30 00:56:03 22033    DEBUG [balancer-api] paste_deploy.flavor            = None
2012-08-30 00:56:03 22033    DEBUG [balancer-api] ********************************************************************************
2012-08-30 00:56:03 22033     INFO [eventlet.wsgi.server] Starting single process server
2012-08-30 00:56:03 22033    DEBUG [eventlet.wsgi.server] (22033) wsgi starting up on http://0.0.0.0:8181/
2012-08-30 00:56:11 22033    DEBUG [routes.middleware] Matched POST /loadbalancers
2012-08-30 00:56:11 22033    DEBUG [routes.middleware] Route path: '/loadbalancers', defaults: {'action': u'create', 'controller': <openstack.common.wsgi.Resource object at 0x2a0c950>}
2012-08-30 00:56:11 22033    DEBUG [routes.middleware] Match dict: {'action': u'create', 'controller': <openstack.common.wsgi.Resource object at 0x2a0c950>}
2012-08-30 00:56:11 22033    DEBUG [openstack.common.wsgi] Resource __call__ is invoked
2012-08-30 00:56:11 22033    DEBUG [openstack.common.wsgi] Request deserialization: POST /loadbalancers HTTP/1.0
Accept: */*
Content-Length: 1997
Content-Type: application/json
Expect: 100-continue
Host: localhost:8181
User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3

{     "device_id": "37ea3a34af584fdf81135028abc32726",     "name": "testLB00rs01",    "type": "HAPROXY",    "protocol": "HTTP",    "transport": "TCP",     "algorithm": "RoundRobin",        "virtualIps": [                    {                      "address": "192.168.19.235",                      "mask": "255.255.255.255",                       "type": "PUBLIC",                      "ipVersion": "IPv4",                       "VLAN": "200",                      "port": "80",		      "ICMPreply": "True"                    }                  ],    "nodes":      [                    {                       "address": "100.1.1.25",                       "type": "host",                       "port": "8080",                       "weight": "2",                        "minCon": "300000",                        "maxCon": "400000",                        "rateBandwidth": "12",                        "rateConnection": "1000",                        "status": "INSERVICE",                       "condition": "ENABLED",		       "vm_instance": "RServer001",		       "vm_id": "1234-1234-1234-1234"                    }                  ],     "healthMonitor": [                      {                         "type": "ICMP",                         "delay": "15",                         "attemptsBeforeDeactivation": "6",                         "timeout": "20"                      },                       {                         "type": "CONNECT",                         "delay": "30",                         "attemptsBeforeDeactivation": "5",                         "timeout": "30"                      },                      {                          "type": "HTTP",                         "delay": "30",                         "attemptsBeforeDeactivation": "5",                         "timeout": "30",                         "method":  "GET",                         "path": "/index.html",                         "expected": "200-204"                      }                      ]}
2012-08-30 00:56:11 22033    DEBUG [openstack.common.wsgi] Deserialization: request has body
2012-08-30 00:56:11 22033    DEBUG [openstack.common.wsgi] Request body: {     "device_id": "37ea3a34af584fdf81135028abc32726",     "name": "testLB00rs01",    "type": "HAPROXY",    "protocol": "HTTP",    "transport": "TCP",     "algorithm": "RoundRobin",        "virtualIps": [                    {                      "address": "192.168.19.235",                      "mask": "255.255.255.255",                       "type": "PUBLIC",                      "ipVersion": "IPv4",                       "VLAN": "200",                      "port": "80",		      "ICMPreply": "True"                    }                  ],    "nodes":      [                    {                       "address": "100.1.1.25",                       "type": "host",                       "port": "8080",                       "weight": "2",                        "minCon": "300000",                        "maxCon": "400000",                        "rateBandwidth": "12",                        "rateConnection": "1000",                        "status": "INSERVICE",                       "condition": "ENABLED",		       "vm_instance": "RServer001",		       "vm_id": "1234-1234-1234-1234"                    }                  ],     "healthMonitor": [                      {                         "type": "ICMP",                         "delay": "15",                         "attemptsBeforeDeactivation": "6",                         "timeout": "20"                      },                       {                         "type": "CONNECT",                         "delay": "30",                         "attemptsBeforeDeactivation": "5",                         "timeout": "30"                      },                      {                          "type": "HTTP",                         "delay": "30",                         "attemptsBeforeDeactivation": "5",                         "timeout": "30",                         "method":  "GET",                         "path": "/index.html",                         "expected": "200-204"                      }                      ]}
2012-08-30 00:56:11 22033    DEBUG [balancer.api.v1.loadbalancers] Got create request. Request: POST /loadbalancers HTTP/1.0
Accept: */*
Content-Length: 1997
Content-Type: application/json
Expect: 100-continue
Host: localhost:8181
User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3

{     "device_id": "37ea3a34af584fdf81135028abc32726",     "name": "testLB00rs01",    "type": "HAPROXY",    "protocol": "HTTP",    "transport": "TCP",     "algorithm": "RoundRobin",        "virtualIps": [                    {                      "address": "192.168.19.235",                      "mask": "255.255.255.255",                       "type": "PUBLIC",                      "ipVersion": "IPv4",                       "VLAN": "200",                      "port": "80",		      "ICMPreply": "True"                    }                  ],    "nodes":      [                    {                       "address": "100.1.1.25",                       "type": "host",                       "port": "8080",                       "weight": "2",                        "minCon": "300000",                        "maxCon": "400000",                        "rateBandwidth": "12",                        "rateConnection": "1000",                        "status": "INSERVICE",                       "condition": "ENABLED",		       "vm_instance": "RServer001",		       "vm_id": "1234-1234-1234-1234"                    }                  ],     "healthMonitor": [                      {                         "type": "ICMP",                         "delay": "15",                         "attemptsBeforeDeactivation": "6",                         "timeout": "20"                      },                       {                         "type": "CONNECT",                         "delay": "30",                         "attemptsBeforeDeactivation": "5",                         "timeout": "30"                      },                      {                          "type": "HTTP",                         "delay": "30",                         "attemptsBeforeDeactivation": "5",                         "timeout": "30",                         "method":  "GET",                         "path": "/index.html",                         "expected": "200-204"                      }                      ]}
2012-08-30 00:56:11 22033    DEBUG [balancer.api.v1.loadbalancers] Headers: {'Content-Length': '1997', 'Accept': '*/*', 'User-Agent': 'curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3', 'Host': 'localhost:8181', 'Expect': '100-continue', 'Content-Type': 'application/json'}
2012-08-30 00:56:11 22033    DEBUG [balancer.core.commands] Finalizing device configuration
2012-08-30 00:56:11 22033    DEBUG [balancer.drivers.haproxy.RemoteControl] [HAPROXY] get config from remote server /etc/haproxy//haproxy.cfg to /tmp//haproxy.cfg
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] starting thread (client mode): 0x2eaf110L
2012-08-30 00:56:11 22033     INFO [paramiko.transport] Connected (version 2.0, client OpenSSH_5.9p1)
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] kex algos:['ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'ecdh-sha2-nistp521', 'diffie-hellman-group-exchange-sha256', 'diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-rsa', 'ssh-dss', 'ecdsa-sha2-nistp256'] client encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] server encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] client mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] server mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] Ciphers agreed: local=aes128-ctr, remote=aes128-ctr
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] using kex diffie-hellman-group1-sha1; server key type ssh-rsa; cipher: local aes128-ctr, remote aes128-ctr; mac: local hmac-sha1, remote hmac-sha1; compression: local none, remote none
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] Switch to new keys ...
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] Adding ssh-rsa host key for 192.168.19.235: 05cf57b6cb95fa318c8ded1129244e30
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] Trying SSH agent key a9a36dfad0a647558f46f559ebf00ced
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] userauth is OK
2012-08-30 00:56:11 22033     INFO [paramiko.transport] Authentication (publickey) failed.
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] userauth is OK
2012-08-30 00:56:11 22033     INFO [paramiko.transport] Authentication (password) successful!
2012-08-30 00:56:11 22033    DEBUG [paramiko.transport] [chan 1] Max packet in: 34816 bytes
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] [chan 1] Max packet out: 32768 bytes
2012-08-30 00:56:13 22033     INFO [paramiko.transport] Secsh channel 1 opened.
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] [chan 1] Sesch channel 1 request ok
2012-08-30 00:56:13 22033     INFO [paramiko.transport.sftp] [chan 1] Opened sftp connection (server version 3)
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport.sftp] [chan 1] open('/etc/haproxy//haproxy.cfg', 'rb')
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport.sftp] [chan 1] open('/etc/haproxy//haproxy.cfg', 'rb') -> 00000000
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport.sftp] [chan 1] stat('/etc/haproxy//haproxy.cfg')
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport.sftp] [chan 1] close(00000000)
2012-08-30 00:56:13 22033     INFO [paramiko.transport.sftp] [chan 1] sftp session closed.
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] [chan 1] EOF sent (1)
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] EOF in transport thread
2012-08-30 00:56:13 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] Marking as not deployed
2012-08-30 00:56:13 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] [HAPROXY] Adding backend
2012-08-30 00:56:13 22033    DEBUG [root] [HAPROXY] writing configuration to /tmp//haproxy.cfg
2012-08-30 00:56:13 22033    DEBUG [balancer.core.commands] Creating rserver command execution with rserver: <balancer.db.models.Server object at 0x2eb8910>
2012-08-30 00:56:13 22033    DEBUG [balancer.core.commands] RServer parent_id: None
2012-08-30 00:56:13 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] [HAPROXY] Creating rserver da0cf5135f6a4b3f9ee1f99bf529addf in thebackend block 3fae24cc21944472b0ef2df4390982f1
2012-08-30 00:56:13 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] Marking as not deployed
2012-08-30 00:56:13 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] [HAPROXY] backend 3fae24cc21944472b0ef2df4390982f1 rserver da0cf5135f6a4b3f9ee1f99bf529addf
2012-08-30 00:56:13 22033    DEBUG [root] [HAPROXY] writing configuration to /tmp//haproxy.cfg
2012-08-30 00:56:13 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] [HAPROXY] create VIP 3fae24cc21944472b0ef2df4390982f1
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] starting thread (client mode): 0x2ea23d0L
2012-08-30 00:56:13 22033     INFO [paramiko.transport] Connected (version 2.0, client OpenSSH_5.9p1)
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] kex algos:['ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'ecdh-sha2-nistp521', 'diffie-hellman-group-exchange-sha256', 'diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-rsa', 'ssh-dss', 'ecdsa-sha2-nistp256'] client encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] server encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] client mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] server mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] Ciphers agreed: local=aes128-ctr, remote=aes128-ctr
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] using kex diffie-hellman-group1-sha1; server key type ssh-rsa; cipher: local aes128-ctr, remote aes128-ctr; mac: local hmac-sha1, remote hmac-sha1; compression: local none, remote none
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] Switch to new keys ...
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] Adding ssh-rsa host key for 192.168.19.235: 05cf57b6cb95fa318c8ded1129244e30
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] Trying SSH agent key a9a36dfad0a647558f46f559ebf00ced
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] userauth is OK
2012-08-30 00:56:13 22033     INFO [paramiko.transport] Authentication (publickey) failed.
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] userauth is OK
2012-08-30 00:56:13 22033     INFO [paramiko.transport] Authentication (password) successful!
2012-08-30 00:56:13 22033    DEBUG [balancer.drivers.haproxy.RemoteControl] [HAPROXY] try add IP-192.168.19.235 to inteface None
2012-08-30 00:56:13 22033    DEBUG [paramiko.transport] [chan 1] Max packet in: 34816 bytes
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] [chan 1] Max packet out: 32768 bytes
2012-08-30 00:56:14 22033     INFO [paramiko.transport] Secsh channel 1 opened.
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] [chan 1] Sesch channel 1 request ok
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] [chan 1] EOF received (1)
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] [chan 1] EOF sent (1)
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] [chan 2] Max packet in: 34816 bytes
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] [chan 2] Max packet out: 32768 bytes
2012-08-30 00:56:14 22033     INFO [paramiko.transport] Secsh channel 2 opened.
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] [chan 2] Sesch channel 2 request ok
2012-08-30 00:56:14 22033    DEBUG [balancer.drivers.haproxy.RemoteControl] [HAPROXY] remote add ip 192.168.19.235 to inteface None
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] EOF in transport thread
2012-08-30 00:56:14 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] Marking as not deployed
2012-08-30 00:56:14 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] [HAPROXY] Adding frontend d166aafbf517491b812b9555c3c39188
2012-08-30 00:56:14 22033    DEBUG [root] [HAPROXY] writing configuration to /tmp//haproxy.cfg
2012-08-30 00:56:14 22033    DEBUG [balancer.core.commands] Finalizing device configuration
2012-08-30 00:56:14 22033    DEBUG [balancer.drivers.haproxy.HaproxyDriver] [HAPROXY] Deploying configuration
2012-08-30 00:56:14 22033    DEBUG [balancer.drivers.haproxy.RemoteControl] [HAPROXY] put configuration to remote server
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] starting thread (client mode): 0x2ea23d0L
2012-08-30 00:56:14 22033     INFO [paramiko.transport] Connected (version 2.0, client OpenSSH_5.9p1)
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] kex algos:['ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'ecdh-sha2-nistp521', 'diffie-hellman-group-exchange-sha256', 'diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-rsa', 'ssh-dss', 'ecdsa-sha2-nistp256'] client encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] server encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] client mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] server mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] Ciphers agreed: local=aes128-ctr, remote=aes128-ctr
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] using kex diffie-hellman-group1-sha1; server key type ssh-rsa; cipher: local aes128-ctr, remote aes128-ctr; mac: local hmac-sha1, remote hmac-sha1; compression: local none, remote none
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] Switch to new keys ...
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] Adding ssh-rsa host key for 192.168.19.235: 05cf57b6cb95fa318c8ded1129244e30
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] Trying SSH agent key a9a36dfad0a647558f46f559ebf00ced
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] userauth is OK
2012-08-30 00:56:14 22033     INFO [paramiko.transport] Authentication (publickey) failed.
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] userauth is OK
2012-08-30 00:56:14 22033     INFO [paramiko.transport] Authentication (password) successful!
2012-08-30 00:56:14 22033    DEBUG [paramiko.transport] [chan 1] Max packet in: 34816 bytes
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] [chan 1] Max packet out: 32768 bytes
2012-08-30 00:56:16 22033     INFO [paramiko.transport] Secsh channel 1 opened.
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] [chan 1] Sesch channel 1 request ok
2012-08-30 00:56:16 22033     INFO [paramiko.transport.sftp] [chan 1] Opened sftp connection (server version 3)
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport.sftp] [chan 1] open('/tmp/haproxy.cfg', 'wb')
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport.sftp] [chan 1] open('/tmp/haproxy.cfg', 'wb') -> 00000000
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport.sftp] [chan 1] close(00000000)
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport.sftp] [chan 1] stat('/tmp/haproxy.cfg')
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] [chan 2] Max packet in: 34816 bytes
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] [chan 2] Max packet out: 32768 bytes
2012-08-30 00:56:16 22033     INFO [paramiko.transport] Secsh channel 2 opened.
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] [chan 2] Sesch channel 2 request ok
2012-08-30 00:56:16 22033     INFO [paramiko.transport.sftp] [chan 1] sftp session closed.
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] [chan 1] EOF sent (1)
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] EOF in transport thread
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] starting thread (client mode): 0x2f9d750L
2012-08-30 00:56:16 22033     INFO [paramiko.transport] Connected (version 2.0, client OpenSSH_5.9p1)
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] kex algos:['ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'ecdh-sha2-nistp521', 'diffie-hellman-group-exchange-sha256', 'diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-rsa', 'ssh-dss', 'ecdsa-sha2-nistp256'] client encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] server encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] client mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] server mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-sha2-256', 'hmac-sha2-256-96', 'hmac-sha2-512', 'hmac-sha2-512-96', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] Ciphers agreed: local=aes128-ctr, remote=aes128-ctr
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] using kex diffie-hellman-group1-sha1; server key type ssh-rsa; cipher: local aes128-ctr, remote aes128-ctr; mac: local hmac-sha1, remote hmac-sha1; compression: local none, remote none
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] Switch to new keys ...
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] Trying SSH agent key a9a36dfad0a647558f46f559ebf00ced
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] userauth is OK
2012-08-30 00:56:16 22033     INFO [paramiko.transport] Authentication (publickey) failed.
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] userauth is OK
2012-08-30 00:56:16 22033     INFO [paramiko.transport] Authentication (password) successful!
2012-08-30 00:56:16 22033    DEBUG [paramiko.transport] [chan 1] Max packet in: 34816 bytes
2012-08-30 00:56:17 22033    DEBUG [paramiko.transport] [chan 1] Max packet out: 32768 bytes
2012-08-30 00:56:17 22033     INFO [paramiko.transport] Secsh channel 1 opened.
2012-08-30 00:56:17 22033    DEBUG [paramiko.transport] [chan 1] Sesch channel 1 request ok
2012-08-30 00:56:17 22033    DEBUG [paramiko.transport] [chan 1] EOF received (1)
2012-08-30 00:56:17 22033    DEBUG [paramiko.transport] [chan 1] EOF sent (1)
2012-08-30 00:56:17 22033    DEBUG [balancer.drivers.haproxy.RemoteControl] [HAPROXY] ssh_out - Configuration file is valid
 - 0
2012-08-30 00:56:17 22033    DEBUG [balancer.drivers.haproxy.RemoteControl] [HAPROXY] remote configuration is valid, restart haproxy
2012-08-30 00:56:17 22033    DEBUG [paramiko.transport] [chan 2] Max packet in: 34816 bytes
2012-08-30 00:56:17 22033    DEBUG [paramiko.transport] [chan 2] Max packet out: 32768 bytes
2012-08-30 00:56:17 22033     INFO [paramiko.transport] Secsh channel 2 opened.
2012-08-30 00:56:17 22033    DEBUG [paramiko.transport] [chan 2] Sesch channel 2 request ok
2012-08-30 00:56:17 22033    DEBUG [paramiko.transport] EOF in transport thread
2012-08-30 00:56:17 22033    DEBUG [openstack.common.wsgi] Called serialize response Action:create Result:{'loadbalancer': {'id': '2ad70e6fb5ac440ba3cab45982e49533'}}  Request:POST /loadbalancers HTTP/1.0
Accept: */*
Content-Length: 1997
Content-Type: application/json
Expect: 100-continue
Host: localhost:8181
User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3

{     "device_id": "37ea3a34af584fdf81135028abc32726",     "name": "testLB00rs01",    "type": "HAPROXY",    "protocol": "HTTP",    "transport": "TCP",     "algorithm": "RoundRobin",        "virtualIps": [                    {                      "address": "192.168.19.235",                      "mask": "255.255.255.255",                       "type": "PUBLIC",                      "ipVersion": "IPv4",                       "VLAN": "200",                      "port": "80",		      "ICMPreply": "True"                    }                  ],    "nodes":      [                    {                       "address": "100.1.1.25",                       "type": "host",                       "port": "8080",                       "weight": "2",                        "minCon": "300000",                        "maxCon": "400000",                        "rateBandwidth": "12",                        "rateConnection": "1000",                        "status": "INSERVICE",                       "condition": "ENABLED",		       "vm_instance": "RServer001",		       "vm_id": "1234-1234-1234-1234"                    }                  ],     "healthMonitor": [                      {                         "type": "ICMP",                         "delay": "15",                         "attemptsBeforeDeactivation": "6",                         "timeout": "20"                      },                       {                         "type": "CONNECT",                         "delay": "30",                         "attemptsBeforeDeactivation": "5",                         "timeout": "30"                      },                      {                          "type": "HTTP",                         "delay": "30",                         "attemptsBeforeDeactivation": "5",                         "timeout": "30",                         "method":  "GET",                         "path": "/index.html",                         "expected": "200-204"                      }                      ]}
2012-08-30 00:56:17 22033    DEBUG [openstack.common.wsgi] serializer: dispatching call
2012-08-30 00:56:17 22033    DEBUG [openstack.common.wsgi] JSONSerializer default method called.
2012-08-30 00:56:17 22033    DEBUG [openstack.common.wsgi] Response: 202 Accepted
Content-Type: text/html; charset=UTF-8
Content-Type: application/json
Content-Length: 60

{"loadbalancer": {"id": "2ad70e6fb5ac440ba3cab45982e49533"}}
2012-08-30 00:56:17 22033    DEBUG [eventlet.wsgi.server] 127.0.0.1 - - [30/Aug/2012 00:56:17] "POST /loadbalancers HTTP/1.1" 202 214 6.227399
